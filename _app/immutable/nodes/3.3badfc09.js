import{s as Ke,a as S,f as _,l as Y,A as Qe,d as g,c as N,g as p,h as E,m as Z,B as Be,j as m,C as ie,D as Xe,i as Se,x as r,E as Re,F as we,n as Je,G as Me,H as Ye,J as Ze}from"../chunks/scheduler.33949bd7.js";import{S as xe,i as et,b as re,d as oe,m as ce,a as z,c as tt,t as Q,e as ue,g as at}from"../chunks/index.a1978529.js";import{v as x,I as lt,h as st,a as se,S as nt,A as rt,b as Le,t as ot,o as ct,n as ut,g as it,f as We,B as ft,u as Fe}from"../chunks/AboutModal.140a8ac9.js";const{Boolean:dt}=it;function Ge(t,n,a){const l=t.slice();return l[14]=n[a],l}function qe(t,n,a){const l=t.slice();return l[17]=n[a],l}function He(t){let n,a=(t[17]==="none"?"(None)":We(x[t[17]],"labelShort","label"))+"",l,d,c;return{c(){n=_("option"),l=Y(a),d=S(),this.h()},l(o){n=p(o,"OPTION",{});var h=E(n);l=Z(h,a),d=N(h),h.forEach(g),this.h()},h(){n.__value=c=t[17],ie(n,n.__value)},m(o,h){Se(o,n,h),r(n,l),r(n,d)},p(o,h){h&4&&a!==(a=(o[17]==="none"?"(None)":We(x[o[17]],"labelShort","label"))+"")&&Je(l,a),h&4&&c!==(c=o[17])&&(n.__value=c,ie(n,n.__value))},d(o){o&&g(n)}}}function ze(t){let n,a;return n=new ft({props:{name:t[14],dataObj:Fe(t[3][t[14]]),showPercentages:!1,xVar:t[0],yMax:t[4]}}),{c(){re(n.$$.fragment)},l(l){oe(n.$$.fragment,l)},m(l,d){ce(n,l,d),a=!0},p(l,d){const c={};d&8&&(c.name=l[14]),d&8&&(c.dataObj=Fe(l[3][l[14]])),d&1&&(c.xVar=l[0]),d&16&&(c.yMax=l[4]),n.$set(c)},i(l){a||(z(n.$$.fragment,l),a=!0)},o(l){Q(n.$$.fragment,l),a=!1},d(l){ue(n,l)}}}function ht(t){let n,a,l,d,c,o,h,C,w,V,R=x[t[0]].label+"",J,X,b,O,T,$="Wave",y,P,A,Ne=t[5][0]+"",fe,D,Ie=t[5][1]+"",de,he,M,L,Ve="Colour",_e,I,pe,ee,ge,W,me,te,ve,F,be,j,$e,G,U,Ee,Ae;C=new lt({props:{data:st}});let K=se(t[2]),v=[];for(let e=0;e<K.length;e+=1)v[e]=He(qe(t,K,e));let q=se(Object.keys(t[3])),u=[];for(let e=0;e<q.length;e+=1)u[e]=ze(Ge(t,q,e));const Ue=e=>Q(u[e],1,1,()=>{u[e]=null});return j=new nt({props:{responseVars:t[6],varLabels:x,currResponse:t[0]}}),j.$on("responseChange",t[8]),G=new rt({}),{c(){n=S(),a=_("div"),l=_("input"),d=S(),c=_("div"),o=_("span"),h=_("label"),re(C.$$.fragment),w=S(),V=_("h1"),J=Y(R),X=S(),b=_("div"),O=_("span"),T=_("span"),T.textContent=$,y=S(),P=_("select"),A=_("option"),fe=Y(Ne),D=_("option"),de=Y(Ie),he=S(),M=_("span"),L=_("span"),L.textContent=Ve,_e=S(),I=_("select");for(let e=0;e<v.length;e+=1)v[e].c();pe=S(),ee=_("br"),ge=S(),W=_("span"),me=Y("* Includes respondents aged 25-35 in Gambia and Senegal"),ve=S(),F=_("div");for(let e=0;e<u.length;e+=1)u[e].c();be=S(),re(j.$$.fragment),$e=S(),re(G.$$.fragment),this.h()},l(e){Qe("svelte-jb16f3",document.head).forEach(g),n=N(e),a=p(e,"DIV",{class:!0});var i=E(a);l=p(i,"INPUT",{id:!0,type:!0,class:!0}),d=N(i),c=p(i,"DIV",{class:!0});var s=E(c);o=p(s,"SPAN",{class:!0});var k=E(o);h=p(k,"LABEL",{for:!0,class:!0});var Oe=E(h);oe(C.$$.fragment,Oe),Oe.forEach(g),w=N(k),V=p(k,"H1",{class:!0});var Pe=E(V);J=Z(Pe,R),Pe.forEach(g),k.forEach(g),X=N(s),b=p(s,"DIV",{class:!0});var B=E(b);O=p(B,"SPAN",{});var ae=E(O);T=p(ae,"SPAN",{class:!0,"data-svelte-h":!0}),Be(T)!=="svelte-lfwh90"&&(T.textContent=$),y=N(ae),P=p(ae,"SELECT",{class:!0});var Ce=E(P);A=p(Ce,"OPTION",{});var ke=E(A);fe=Z(ke,Ne),ke.forEach(g),D=p(Ce,"OPTION",{});var Te=E(D);de=Z(Te,Ie),Te.forEach(g),Ce.forEach(g),ae.forEach(g),he=N(B),M=p(B,"SPAN",{});var le=E(M);L=p(le,"SPAN",{class:!0,"data-svelte-h":!0}),Be(L)!=="svelte-eh4omn"&&(L.textContent=Ve),_e=N(le),I=p(le,"SELECT",{class:!0});var je=E(I);for(let H=0;H<v.length;H+=1)v[H].l(je);je.forEach(g),le.forEach(g),pe=N(B),ee=p(B,"BR",{class:!0}),ge=N(B),W=p(B,"SPAN",{class:!0});var ye=E(W);me=Z(ye,"* Includes respondents aged 25-35 in Gambia and Senegal"),ye.forEach(g),B.forEach(g),ve=N(s),F=p(s,"DIV",{class:!0});var De=E(F);for(let H=0;H<u.length;H+=1)u[H].l(De);De.forEach(g),s.forEach(g),be=N(i),oe(j.$$.fragment,i),$e=N(i),oe(G.$$.fragment,i),i.forEach(g),this.h()},h(){document.title="TRANSMIT Data Explorer",m(l,"id","page-drawer"),m(l,"type","checkbox"),m(l,"class","drawer-toggle"),m(h,"for","page-drawer"),m(h,"class","btn btn-square btn-ghost drawer-button mr-4"),m(V,"class","text-lg font-bold uppercase"),m(o,"class","mb-4 flex items-center before:text-xs before:content-[attr(data-tip)] lg:hidden"),m(T,"class","label-text"),A.__value=t[5][0],ie(A,A.__value),D.__value=t[5][1],ie(D,D.__value),m(P,"class","select select-bordered select-sm m-1 mr-4"),m(L,"class","label-text"),m(I,"class","select select-bordered select-sm m-1 mr-4 w-32"),t[1]===void 0&&Xe(()=>t[11].call(I)),m(ee,"class","md:hidden"),m(W,"class",te=t[0]==="agegr"||t[1]==="agegr"?"label-text ml-2":"hidden"),m(b,"class","mb-8 lg:mt-2"),m(F,"class","grid max-h-[calc(100vh-72px)] grid-cols-1 gap-3 overflow-y-auto overflow-x-hidden"),m(c,"class","drawer-content flex flex-col p-4"),m(a,"class","drawer drawer-mobile")},m(e,f){Se(e,n,f),Se(e,a,f),r(a,l),r(a,d),r(a,c),r(c,o),r(o,h),ce(C,h,null),r(o,w),r(o,V),r(V,J),r(c,X),r(c,b),r(b,O),r(O,T),r(O,y),r(O,P),r(P,A),r(A,fe),r(P,D),r(D,de),r(b,he),r(b,M),r(M,L),r(M,_e),r(M,I);for(let i=0;i<v.length;i+=1)v[i]&&v[i].m(I,null);Re(I,t[1],!0),r(b,pe),r(b,ee),r(b,ge),r(b,W),r(W,me),r(c,ve),r(c,F);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(F,null);r(a,be),ce(j,a,null),r(a,$e),ce(G,a,null),U=!0,Ee||(Ae=[we(P,"change",t[7]),we(I,"change",t[11]),we(I,"change",t[9])],Ee=!0)},p(e,[f]){if((!U||f&1)&&R!==(R=x[e[0]].label+"")&&Je(J,R),f&4){K=se(e[2]);let s;for(s=0;s<K.length;s+=1){const k=qe(e,K,s);v[s]?v[s].p(k,f):(v[s]=He(k),v[s].c(),v[s].m(I,null))}for(;s<v.length;s+=1)v[s].d(1);v.length=K.length}if(f&6&&Re(I,e[1]),(!U||f&7&&te!==(te=e[0]==="agegr"||e[1]==="agegr"?"label-text ml-2":"hidden"))&&m(W,"class",te),f&25){q=se(Object.keys(e[3]));let s;for(s=0;s<q.length;s+=1){const k=Ge(e,q,s);u[s]?(u[s].p(k,f),z(u[s],1)):(u[s]=ze(k),u[s].c(),z(u[s],1),u[s].m(F,null))}for(at(),s=q.length;s<u.length;s+=1)Ue(s);tt()}const i={};f&1&&(i.currResponse=e[0]),j.$set(i)},i(e){if(!U){z(C.$$.fragment,e);for(let f=0;f<q.length;f+=1)z(u[f]);z(j.$$.fragment,e),z(G.$$.fragment,e),U=!0}},o(e){Q(C.$$.fragment,e),u=u.filter(dt);for(let f=0;f<u.length;f+=1)Q(u[f]);Q(j.$$.fragment,e),Q(G.$$.fragment,e),U=!1},d(e){e&&(g(n),g(a)),ue(C),Me(v,e),Me(u,e),ue(j),ue(G),Ee=!1,Ye(Ae)}}}const ne="Rcountry";function _t(t,n,a){const l=["1","2"];let d=Le[l[0]];const c=Object.keys(d);let o=c[0];const h=["agegr","gender","edu","none"];let C=h.filter($=>$!==o),w=C[0],V;function R($){a(10,d=Le[$.currentTarget.value]),console.log($.currentTarget.value)}function J($){a(0,o=$.detail.response),a(2,C=h.filter(y=>y!==o)),V=w,a(1,w=C.includes(V)?V:C[0])}function X($){V=w,a(1,w=$.currentTarget.value)}let b,O;function T(){w=Ze(this),a(1,w),a(2,C)}return t.$$.update=()=>{if(t.$$.dirty&1027){let $=ot(d[o]);w==="none"&&($=$.derive({none:A=>""}));let y=$.groupby([`${ne}`,`${w}`,`${o}`]).rollup({value:A=>ct.sum(A.value)});a(4,O=Math.max(...y.array("value").filter(Boolean)));const P=y.groupby([`${ne}`,`${o}`]).pivot(`${w}`,"value",{sort:!1});a(3,b=P.groupby(`${ne}`).objects({columns:ut(`${ne}`),grouped:"object"}))}},[o,w,C,b,O,l,c,R,J,X,d,T]}class vt extends xe{constructor(n){super(),et(this,n,_t,ht,Ke,{})}}export{vt as component};
