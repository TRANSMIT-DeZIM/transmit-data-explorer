import{s as Rt,a as v,f as i,l as _e,A as $t,d,c as E,g as h,h as w,m as fe,B as Ne,j as c,F as pe,G as wt,i as Ae,x as s,H as Ue,D as ie,n as Je,I as ze,E as jt,y as Bt,J as Ft,K as Ct,L as Dt}from"../chunks/scheduler.cb035a1f.js";import{S as Mt,i as Ut,b as He,d as qe,m as Ge,a as he,c as zt,t as Ee,e as We,g as Ht}from"../chunks/index.ab256b4e.js";import{w as qt,e as Gt,v as Z,f as Ve,I as Wt,h as Jt,a as X,S as Kt,d as kt,t as Yt,o as Pe,n as Qt,g as Xt,B as Zt,u as St}from"../chunks/SidebarDrawer.c27aab6b.js";import{A as xt}from"../chunks/AboutModal.80c94a42.js";function el(l){return qt(l,{escape:!0,toString(){Gt("Escaped values can not be serialized.")}})}const{Boolean:tl}=Xt;function Nt(l,n,e){const r=l.slice();return r[27]=n[e],r}function Pt(l,n,e){const r=l.slice();return r[30]=n[e],r}function At(l,n,e){const r=l.slice();return r[33]=n[e],r}function Vt(l,n,e){const r=l.slice();return r[36]=n[e],r}function Ot(l){let n,e=Ve(Z[l[36]],"labelShort","label")+"",r,b;return{c(){n=i("option"),r=_e(e),b=v(),this.h()},l(o){n=h(o,"OPTION",{});var _=w(n);r=fe(_,e),b=E(_),_.forEach(d),this.h()},h(){n.__value=l[36],pe(n,n.__value)},m(o,_){Ae(o,n,_),s(n,r),s(n,b)},p:Bt,d(o){o&&d(n)}}}function yt(l){let n,e,r,b=!1,o,_,f=l[33]+"",S,C,j,O,F;return j=Ft(l[20][0]),{c(){n=i("label"),e=i("input"),o=v(),_=i("span"),S=_e(f),C=v(),this.h()},l(N){n=h(N,"LABEL",{class:!0});var u=w(n);e=h(u,"INPUT",{type:!0,name:!0,class:!0}),o=E(u),_=h(u,"SPAN",{class:!0});var y=w(_);S=fe(y,f),y.forEach(d),C=E(u),u.forEach(d),this.h()},h(){c(e,"type","checkbox"),c(e,"name","currFilterValues"),e.__value=r=l[33],pe(e,e.__value),c(e,"class","toggle toggle-xs mr-1 align-middle"),c(_,"class","label-text"),c(n,"class","cursor-pointer"),j.p(e)},m(N,u){Ae(N,n,u),s(n,e),e.checked=~(l[3]||[]).indexOf(e.__value),s(n,o),s(n,_),s(_,S),s(n,C),O||(F=ie(e,"change",l[19]),O=!0)},p(N,u){u[0]&64&&r!==(r=N[33])&&(e.__value=r,pe(e,e.__value),b=!0),(b||u[0]&72)&&(e.checked=~(N[3]||[]).indexOf(e.__value)),u[0]&64&&f!==(f=N[33]+"")&&Je(S,f)},d(N){N&&d(n),j.r(),O=!1,F()}}}function Tt(l){let n,e=(l[30]==="none"?"(None)":Ve(Z[l[30]],"labelShort","label"))+"",r,b,o;return{c(){n=i("option"),r=_e(e),b=v(),this.h()},l(_){n=h(_,"OPTION",{});var f=w(n);r=fe(f,e),b=E(f),f.forEach(d),this.h()},h(){n.__value=o=l[30],pe(n,n.__value)},m(_,f){Ae(_,n,f),s(n,r),s(n,b)},p(_,f){f[0]&128&&e!==(e=(_[30]==="none"?"(None)":Ve(Z[_[30]],"labelShort","label"))+"")&&Je(r,e),f[0]&128&&o!==(o=_[30])&&(n.__value=o,pe(n,n.__value))},d(_){_&&d(n)}}}function It(l){let n,e;return n=new Zt({props:{name:l[27],dataObj:St(l[8][l[27]]),showPercentages:l[0]!=="plan_mig"?!l[5]:!1,xVar:l[0]!=="plan_mig"?l[0]:l[1],yMax:l[9]}}),{c(){He(n.$$.fragment)},l(r){qe(n.$$.fragment,r)},m(r,b){Ge(n,r,b),e=!0},p(r,b){const o={};b[0]&256&&(o.name=r[27]),b[0]&256&&(o.dataObj=St(r[8][r[27]])),b[0]&33&&(o.showPercentages=r[0]!=="plan_mig"?!r[5]:!1),b[0]&3&&(o.xVar=r[0]!=="plan_mig"?r[0]:r[1]),b[0]&512&&(o.yMax=r[9]),n.$set(o)},i(r){e||(he(n.$$.fragment,r),e=!0)},o(r){Ee(n.$$.fragment,r),e=!1},d(r){We(n,r)}}}function ll(l){let n,e,r,b,o,_,f,S,C,j,O=Z[l[0]].label+"",F,N,u,y,k,x="Year",we,U,z,Oe=l[10][0]+"",J,M,Ce=l[10][1]+"",de,ke,H,q,ye="Groups",P,A,ge,V,Ke,ee,te,ct="Filter",Ye,K,le,Se=Ve(Z[l[2]],"labelShort","label")+"",Te,Qe,Y,Xe,Ie,Ze,ae,se,ut="Colour",xe,D,et,Le,tt,G,ne,it="Show raw counts",lt,Q,Re,at,re,st,W,nt,oe,ce,rt,ht;S=new Wt({props:{data:Jt}});let be=X(l[12]),T=[];for(let t=0;t<be.length;t+=1)T[t]=Ot(Vt(l,be,t));let me=X(l[6]),I=[];for(let t=0;t<me.length;t+=1)I[t]=yt(At(l,me,t));let ve=X(l[7]),L=[];for(let t=0;t<ve.length;t+=1)L[t]=Tt(Pt(l,ve,t));let ue=X(Object.keys(l[8])),m=[];for(let t=0;t<ue.length;t+=1)m[t]=It(Nt(l,ue,t));const Lt=t=>Ee(m[t],1,1,()=>{m[t]=null});return W=new Kt({props:{responseVars:l[11],varLabels:Z,currResponse:l[0]}}),W.$on("responseChange",l[14]),oe=new xt({props:{which:"MENA"}}),{c(){n=v(),e=i("div"),r=i("input"),b=v(),o=i("div"),_=i("span"),f=i("label"),He(S.$$.fragment),C=v(),j=i("h1"),F=_e(O),N=v(),u=i("div"),y=i("span"),k=i("span"),k.textContent=x,we=v(),U=i("select"),z=i("option"),J=_e(Oe),M=i("option"),de=_e(Ce),ke=v(),H=i("span"),q=i("span"),q.textContent=ye,P=v(),A=i("select");for(let t=0;t<T.length;t+=1)T[t].c();ge=v(),V=i("br"),Ke=v(),ee=i("span"),te=i("span"),te.textContent=ct,Ye=v(),K=i("div"),le=i("label"),Te=_e(Se),Qe=v(),Y=i("ul");for(let t=0;t<I.length;t+=1)I[t].c();Xe=v(),Ie=i("br"),Ze=v(),ae=i("span"),se=i("span"),se.textContent=ut,xe=v(),D=i("select");for(let t=0;t<L.length;t+=1)L[t].c();et=v(),Le=i("br"),tt=v(),G=i("label"),ne=i("span"),ne.textContent=it,lt=v(),Q=i("input"),at=v(),re=i("div");for(let t=0;t<m.length;t+=1)m[t].c();st=v(),He(W.$$.fragment),nt=v(),He(oe.$$.fragment),this.h()},l(t){$t("svelte-jb16f3",document.head).forEach(d),n=E(t),e=h(t,"DIV",{class:!0});var p=w(e);r=h(p,"INPUT",{id:!0,type:!0,class:!0}),b=E(p),o=h(p,"DIV",{class:!0});var a=w(o);_=h(a,"SPAN",{class:!0});var R=w(_);f=h(R,"LABEL",{for:!0,class:!0});var _t=w(f);qe(S.$$.fragment,_t),_t.forEach(d),C=E(R),j=h(R,"H1",{class:!0});var ft=w(j);F=fe(ft,O),ft.forEach(d),R.forEach(d),N=E(a),u=h(a,"DIV",{class:!0});var $=w(u);y=h($,"SPAN",{});var $e=w(y);k=h($e,"SPAN",{class:!0,"data-svelte-h":!0}),Ne(k)!=="svelte-1pk3iag"&&(k.textContent=x),we=E($e),U=h($e,"SELECT",{class:!0});var ot=w(U);z=h(ot,"OPTION",{});var pt=w(z);J=fe(pt,Oe),pt.forEach(d),M=h(ot,"OPTION",{});var dt=w(M);de=fe(dt,Ce),dt.forEach(d),ot.forEach(d),$e.forEach(d),ke=E($),H=h($,"SPAN",{});var je=w(H);q=h(je,"SPAN",{class:!0,"data-svelte-h":!0}),Ne(q)!=="svelte-1shbnzv"&&(q.textContent=ye),P=E(je),A=h(je,"SELECT",{class:!0});var gt=w(A);for(let B=0;B<T.length;B+=1)T[B].l(gt);gt.forEach(d),je.forEach(d),ge=E($),V=h($,"BR",{class:!0}),Ke=E($),ee=h($,"SPAN",{});var Be=w(ee);te=h(Be,"SPAN",{class:!0,"data-svelte-h":!0}),Ne(te)!=="svelte-nhu1x1"&&(te.textContent=ct),Ye=E(Be),K=h(Be,"DIV",{class:!0});var Fe=w(K);le=h(Fe,"LABEL",{tabindex:!0,class:!0});var bt=w(le);Te=fe(bt,Se),bt.forEach(d),Qe=E(Fe),Y=h(Fe,"UL",{tabindex:!0,class:!0});var mt=w(Y);for(let B=0;B<I.length;B+=1)I[B].l(mt);mt.forEach(d),Fe.forEach(d),Be.forEach(d),Xe=E($),Ie=h($,"BR",{class:!0}),Ze=E($),ae=h($,"SPAN",{});var De=w(ae);se=h(De,"SPAN",{class:!0,"data-svelte-h":!0}),Ne(se)!=="svelte-eh4omn"&&(se.textContent=ut),xe=E(De),D=h(De,"SELECT",{class:!0});var vt=w(D);for(let B=0;B<L.length;B+=1)L[B].l(vt);vt.forEach(d),De.forEach(d),et=E($),Le=h($,"BR",{class:!0}),tt=E($),G=h($,"LABEL",{class:!0});var Me=w(G);ne=h(Me,"SPAN",{class:!0,"data-svelte-h":!0}),Ne(ne)!=="svelte-1i7vxi6"&&(ne.textContent=it),lt=E(Me),Q=h(Me,"INPUT",{type:!0,class:!0}),Me.forEach(d),$.forEach(d),at=E(a),re=h(a,"DIV",{class:!0});var Et=w(re);for(let B=0;B<m.length;B+=1)m[B].l(Et);Et.forEach(d),a.forEach(d),st=E(p),qe(W.$$.fragment,p),nt=E(p),qe(oe.$$.fragment,p),p.forEach(d),this.h()},h(){document.title="TRANSMIT Data Explorer",c(r,"id","page-drawer"),c(r,"type","checkbox"),c(r,"class","drawer-toggle"),c(f,"for","page-drawer"),c(f,"class","btn btn-square btn-ghost drawer-button mr-4"),c(j,"class","text-lg font-bold uppercase"),c(_,"class","mb-4 flex items-center before:text-xs before:content-[attr(data-tip)] lg:hidden"),c(k,"class","label-text"),z.__value=l[10][0],pe(z,z.__value),M.__value=l[10][1],pe(M,M.__value),c(U,"class","select select-bordered select-sm m-1 mr-4"),c(q,"class","label-text"),c(A,"class","select select-bordered select-sm m-1 mr-4 w-32"),l[1]===void 0&&wt(()=>l[18].call(A)),c(V,"class","sm:hidden"),c(te,"class","label-text"),c(le,"tabindex","0"),c(le,"class","btn btn-ghost btn-sm no-animation m-1 mr-4 w-28 justify-start border-black/20 normal-case"),c(Y,"tabindex","0"),c(Y,"class","dropdown-content menu mt-[-4px] w-32 rounded-lg border-[1px] border-black/20 bg-base-100 p-2 pl-4 shadow"),c(K,"class","dropdown"),c(Ie,"class","md:hidden"),c(se,"class","label-text"),c(D,"class","select select-bordered select-sm m-1 mr-4 w-32"),l[4]===void 0&&wt(()=>l[21].call(D)),c(Le,"class","mb-4 lg:hidden"),c(ne,"class","label-text"),c(Q,"type","checkbox"),c(Q,"class","toggle m-1 align-middle"),c(G,"class",Re=l[0]==="plan_mig"?"hidden cursor-pointer":"cursor-pointer"),c(u,"class","mb-8 lg:mt-2"),c(re,"class","grid max-h-[calc(100vh-72px)] grid-cols-1 gap-3 overflow-y-auto overflow-x-hidden"),c(o,"class","drawer-content flex flex-col p-4"),c(e,"class","drawer drawer-mobile")},m(t,g){Ae(t,n,g),Ae(t,e,g),s(e,r),s(e,b),s(e,o),s(o,_),s(_,f),Ge(S,f,null),s(_,C),s(_,j),s(j,F),s(o,N),s(o,u),s(u,y),s(y,k),s(y,we),s(y,U),s(U,z),s(z,J),s(U,M),s(M,de),s(u,ke),s(u,H),s(H,q),s(H,P),s(H,A);for(let p=0;p<T.length;p+=1)T[p]&&T[p].m(A,null);Ue(A,l[1],!0),s(u,ge),s(u,V),s(u,Ke),s(u,ee),s(ee,te),s(ee,Ye),s(ee,K),s(K,le),s(le,Te),s(K,Qe),s(K,Y);for(let p=0;p<I.length;p+=1)I[p]&&I[p].m(Y,null);s(u,Xe),s(u,Ie),s(u,Ze),s(u,ae),s(ae,se),s(ae,xe),s(ae,D);for(let p=0;p<L.length;p+=1)L[p]&&L[p].m(D,null);Ue(D,l[4],!0),s(u,et),s(u,Le),s(u,tt),s(u,G),s(G,ne),s(G,lt),s(G,Q),Q.checked=l[5],s(o,at),s(o,re);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(re,null);s(e,st),Ge(W,e,null),s(e,nt),Ge(oe,e,null),ce=!0,rt||(ht=[ie(U,"change",l[13]),ie(A,"change",l[18]),ie(A,"change",l[15]),ie(D,"change",l[21]),ie(D,"change",l[16]),ie(Q,"change",l[22])],rt=!0)},p(t,g){if((!ce||g[0]&1)&&O!==(O=Z[t[0]].label+"")&&Je(F,O),g[0]&4096){be=X(t[12]);let a;for(a=0;a<be.length;a+=1){const R=Vt(t,be,a);T[a]?T[a].p(R,g):(T[a]=Ot(R),T[a].c(),T[a].m(A,null))}for(;a<T.length;a+=1)T[a].d(1);T.length=be.length}if(g[0]&4098&&Ue(A,t[1]),(!ce||g[0]&4)&&Se!==(Se=Ve(Z[t[2]],"labelShort","label")+"")&&Je(Te,Se),g[0]&72){me=X(t[6]);let a;for(a=0;a<me.length;a+=1){const R=At(t,me,a);I[a]?I[a].p(R,g):(I[a]=yt(R),I[a].c(),I[a].m(Y,null))}for(;a<I.length;a+=1)I[a].d(1);I.length=me.length}if(g[0]&128){ve=X(t[7]);let a;for(a=0;a<ve.length;a+=1){const R=Pt(t,ve,a);L[a]?L[a].p(R,g):(L[a]=Tt(R),L[a].c(),L[a].m(D,null))}for(;a<L.length;a+=1)L[a].d(1);L.length=ve.length}if(g[0]&144&&Ue(D,t[4]),g[0]&32&&(Q.checked=t[5]),(!ce||g[0]&1&&Re!==(Re=t[0]==="plan_mig"?"hidden cursor-pointer":"cursor-pointer"))&&c(G,"class",Re),g[0]&803){ue=X(Object.keys(t[8]));let a;for(a=0;a<ue.length;a+=1){const R=Nt(t,ue,a);m[a]?(m[a].p(R,g),he(m[a],1)):(m[a]=It(R),m[a].c(),he(m[a],1),m[a].m(re,null))}for(Ht(),a=ue.length;a<m.length;a+=1)Lt(a);zt()}const p={};g[0]&1&&(p.currResponse=t[0]),W.$set(p)},i(t){if(!ce){he(S.$$.fragment,t);for(let g=0;g<ue.length;g+=1)he(m[g]);he(W.$$.fragment,t),he(oe.$$.fragment,t),ce=!0}},o(t){Ee(S.$$.fragment,t),m=m.filter(tl);for(let g=0;g<m.length;g+=1)Ee(m[g]);Ee(W.$$.fragment,t),Ee(oe.$$.fragment,t),ce=!1},d(t){t&&(d(n),d(e)),We(S),ze(T,t),ze(I,t),ze(L,t),ze(m,t),We(W),We(oe),rt=!1,jt(ht)}}}function al(l,n,e){const r=["2020","2022"],b={Rcountry:["Lebanon","Türkiye"],strata:["Syrian","Host"]};let o=kt[r[0]];const _=Object.keys(o);let f=_[0];const S=["Rcountry","strata"];let C=S[0],j,O=S[1],F=b[O],N=F;const u=["agegr","gender","edu","none"];let y=u.filter(P=>P!==f),k=y[0],x;function we(P){e(17,o=kt[P.currentTarget.value]),console.log(P.currentTarget.value)}function U(P){e(0,f=P.detail.response),j=C,e(1,C=S.includes(j)?j:S[0]),e(2,O=C==="Rcountry"?"strata":"Rcountry"),e(6,F=b[O]),e(7,y=u.filter(A=>A!==f)),x=k,e(4,k=y.includes(x)?x:y[0])}function z(P){j=C,e(1,C=P.currentTarget.value),e(2,O=C==="Rcountry"?"strata":"Rcountry"),e(6,F=b[O]),e(3,N=F)}function Oe(P){x=k,e(4,k=P.currentTarget.value)}let J=!1,M,Ce;const de=[[]];function ke(){C=Ct(this),e(1,C),e(12,S)}function H(){N=Dt(de[0],this.__value,this.checked),e(3,N)}function q(){k=Ct(this),e(4,k),e(7,y)}function ye(){J=this.checked,e(5,J)}return l.$$.update=()=>{if(l.$$.dirty[0]&131135){let P=Yt(o[f]).filter(el(V=>Pe.includes(N,V[O])));k==="none"&&(P=P.derive({none:V=>""}));let A=f!=="plan_mig"?P.groupby([`${C}`,`${k}`,`${f}`]).rollup({value:V=>Pe.sum(V.value)}):P.groupby([`${C}`,`${k}`]).rollup({value:V=>Math.round(Pe.sum(V.value*V.weight)/Pe.sum(V.weight)*100)/100});!J&&f!=="plan_mig"&&(A=A.groupby([`${C}`,`${k}`]).derive({value:V=>V.value/Pe.sum(V.value)*100||0})),e(9,Ce=Math.max(...A.array("value").filter(Boolean)));const ge=A.groupby([`${C}`,`${f}`].filter(V=>V!=="plan_mig")).pivot(`${k}`,"value",{sort:!1});e(8,M=f!=="plan_mig"?ge.groupby(`${C}`).objects({columns:Qt(`${C}`),grouped:"object"}):ge.groupby({key:V=>" "}).objects({grouped:"object"}))}},[f,C,O,N,k,J,F,y,M,Ce,r,_,S,we,U,z,Oe,o,ke,H,de,q,ye]}class cl extends Mt{constructor(n){super(),Ut(this,n,al,ll,Rt,{},null,[-1,-1])}}export{cl as component};
