import{s as Fe,a as O,f as g,l as te,A as qe,d,c as k,g as m,h as C,m as ae,B as ye,j as b,C as oe,D as He,i as ve,x as n,E as Ae,F as me,n as Le,G as Ie,H as xe,J as ze}from"../chunks/scheduler.33949bd7.js";import{S as Ge,i as Je,b as le,d as se,m as re,a as H,c as Ue,t as G,e as ne,g as Ke}from"../chunks/index.a1978529.js";import{v as K,I as Qe,h as Xe,a as Z,S as Ye,A as Ze,b as Pe,t as et,o as tt,n as at,g as lt,f as Te,B as st,u as je}from"../chunks/AboutModal.e9d3ecbe.js";const{Boolean:rt}=lt;function De(a,r,t){const l=a.slice();return l[14]=r[t],l}function Be(a,r,t){const l=a.slice();return l[17]=r[t],l}function Me(a){let r,t=(a[17]==="none"?"(None)":Te(K[a[17]],"labelShort","label"))+"",l,f,c;return{c(){r=g("option"),l=te(t),f=O(),this.h()},l(o){r=m(o,"OPTION",{});var h=C(r);l=ae(h,t),f=k(h),h.forEach(d),this.h()},h(){r.__value=c=a[17],oe(r,r.__value)},m(o,h){ve(o,r,h),n(r,l),n(r,f)},p(o,h){h&4&&t!==(t=(o[17]==="none"?"(None)":Te(K[o[17]],"labelShort","label"))+"")&&Le(l,t),h&4&&c!==(c=o[17])&&(r.__value=c,oe(r,r.__value))},d(o){o&&d(r)}}}function Re(a){let r,t;return r=new st({props:{name:a[14],dataObj:je(a[3][a[14]]),showPercentages:!1,xVar:a[0],yMax:a[4]}}),{c(){le(r.$$.fragment)},l(l){se(r.$$.fragment,l)},m(l,f){re(r,l,f),t=!0},p(l,f){const c={};f&8&&(c.name=l[14]),f&8&&(c.dataObj=je(l[3][l[14]])),f&1&&(c.xVar=l[0]),f&16&&(c.yMax=l[4]),r.$set(c)},i(l){t||(H(r.$$.fragment,l),t=!0)},o(l){G(r.$$.fragment,l),t=!1},d(l){ne(r,l)}}}function nt(a){let r,t,l,f,c,o,h,$,E,S,B=K[a[0]].label+"",x,J,N,y,P,v="Wave",j,A,V,be=a[5][0]+"",ce,D,$e=a[5][1]+"",ue,ie,M,R,Ee="Colour",fe,w,he,L,_e,T,de,W,U,pe,Ce;$=new Qe({props:{data:Xe}});let z=Z(a[2]),p=[];for(let e=0;e<z.length;e+=1)p[e]=Me(Be(a,z,e));let F=Z(Object.keys(a[3])),u=[];for(let e=0;e<F.length;e+=1)u[e]=Re(De(a,F,e));const We=e=>G(u[e],1,1,()=>{u[e]=null});return T=new Ye({props:{responseVars:a[6],varLabels:K,currResponse:a[0]}}),T.$on("responseChange",a[8]),W=new Ze({}),{c(){r=O(),t=g("div"),l=g("input"),f=O(),c=g("div"),o=g("span"),h=g("label"),le($.$$.fragment),E=O(),S=g("h1"),x=te(B),J=O(),N=g("div"),y=g("span"),P=g("span"),P.textContent=v,j=O(),A=g("select"),V=g("option"),ce=te(be),D=g("option"),ue=te($e),ie=O(),M=g("span"),R=g("span"),R.textContent=Ee,fe=O(),w=g("select");for(let e=0;e<p.length;e+=1)p[e].c();he=O(),L=g("div");for(let e=0;e<u.length;e+=1)u[e].c();_e=O(),le(T.$$.fragment),de=O(),le(W.$$.fragment),this.h()},l(e){qe("svelte-jb16f3",document.head).forEach(d),r=k(e),t=m(e,"DIV",{class:!0});var i=C(t);l=m(i,"INPUT",{id:!0,type:!0,class:!0}),f=k(i),c=m(i,"DIV",{class:!0});var s=C(c);o=m(s,"SPAN",{class:!0});var I=C(o);h=m(I,"LABEL",{for:!0,class:!0});var we=C(h);se($.$$.fragment,we),we.forEach(d),E=k(I),S=m(I,"H1",{class:!0});var Se=C(S);x=ae(Se,B),Se.forEach(d),I.forEach(d),J=k(s),N=m(s,"DIV",{class:!0});var Q=C(N);y=m(Q,"SPAN",{});var X=C(y);P=m(X,"SPAN",{class:!0,"data-svelte-h":!0}),ye(P)!=="svelte-lfwh90"&&(P.textContent=v),j=k(X),A=m(X,"SELECT",{class:!0});var ge=C(A);V=m(ge,"OPTION",{});var Ne=C(V);ce=ae(Ne,be),Ne.forEach(d),D=m(ge,"OPTION",{});var Ve=C(D);ue=ae(Ve,$e),Ve.forEach(d),ge.forEach(d),X.forEach(d),ie=k(Q),M=m(Q,"SPAN",{});var Y=C(M);R=m(Y,"SPAN",{class:!0,"data-svelte-h":!0}),ye(R)!=="svelte-eh4omn"&&(R.textContent=Ee),fe=k(Y),w=m(Y,"SELECT",{class:!0});var Oe=C(w);for(let q=0;q<p.length;q+=1)p[q].l(Oe);Oe.forEach(d),Y.forEach(d),Q.forEach(d),he=k(s),L=m(s,"DIV",{class:!0});var ke=C(L);for(let q=0;q<u.length;q+=1)u[q].l(ke);ke.forEach(d),s.forEach(d),_e=k(i),se(T.$$.fragment,i),de=k(i),se(W.$$.fragment,i),i.forEach(d),this.h()},h(){document.title="TRANSMIT Data Explorer",b(l,"id","page-drawer"),b(l,"type","checkbox"),b(l,"class","drawer-toggle"),b(h,"for","page-drawer"),b(h,"class","btn btn-square btn-ghost drawer-button mr-4"),b(S,"class","text-lg font-bold uppercase"),b(o,"class","mb-4 flex items-center before:text-xs before:content-[attr(data-tip)] lg:hidden"),b(P,"class","label-text"),V.__value=a[5][0],oe(V,V.__value),D.__value=a[5][1],oe(D,D.__value),b(A,"class","select select-bordered select-sm m-1 mr-4"),b(R,"class","label-text"),b(w,"class","select select-bordered select-sm m-1 mr-4 w-32"),a[1]===void 0&&He(()=>a[11].call(w)),b(N,"class","mb-8 lg:mt-2"),b(L,"class","grid max-h-[calc(100vh-72px)] grid-cols-1 gap-3 overflow-y-auto overflow-x-hidden"),b(c,"class","drawer-content flex flex-col p-4"),b(t,"class","drawer drawer-mobile")},m(e,_){ve(e,r,_),ve(e,t,_),n(t,l),n(t,f),n(t,c),n(c,o),n(o,h),re($,h,null),n(o,E),n(o,S),n(S,x),n(c,J),n(c,N),n(N,y),n(y,P),n(y,j),n(y,A),n(A,V),n(V,ce),n(A,D),n(D,ue),n(N,ie),n(N,M),n(M,R),n(M,fe),n(M,w);for(let i=0;i<p.length;i+=1)p[i]&&p[i].m(w,null);Ae(w,a[1],!0),n(c,he),n(c,L);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(L,null);n(t,_e),re(T,t,null),n(t,de),re(W,t,null),U=!0,pe||(Ce=[me(A,"change",a[7]),me(w,"change",a[11]),me(w,"change",a[9])],pe=!0)},p(e,[_]){if((!U||_&1)&&B!==(B=K[e[0]].label+"")&&Le(x,B),_&4){z=Z(e[2]);let s;for(s=0;s<z.length;s+=1){const I=Be(e,z,s);p[s]?p[s].p(I,_):(p[s]=Me(I),p[s].c(),p[s].m(w,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=z.length}if(_&6&&Ae(w,e[1]),_&25){F=Z(Object.keys(e[3]));let s;for(s=0;s<F.length;s+=1){const I=De(e,F,s);u[s]?(u[s].p(I,_),H(u[s],1)):(u[s]=Re(I),u[s].c(),H(u[s],1),u[s].m(L,null))}for(Ke(),s=F.length;s<u.length;s+=1)We(s);Ue()}const i={};_&1&&(i.currResponse=e[0]),T.$set(i)},i(e){if(!U){H($.$$.fragment,e);for(let _=0;_<F.length;_+=1)H(u[_]);H(T.$$.fragment,e),H(W.$$.fragment,e),U=!0}},o(e){G($.$$.fragment,e),u=u.filter(rt);for(let _=0;_<u.length;_+=1)G(u[_]);G(T.$$.fragment,e),G(W.$$.fragment,e),U=!1},d(e){e&&(d(r),d(t)),ne($),Ie(p,e),Ie(u,e),ne(T),ne(W),pe=!1,xe(Ce)}}}const ee="Rcountry";function ot(a,r,t){const l=["1","2"];let f=Pe[l[0]];const c=Object.keys(f);let o=c[0];const h=["agegr","gender","edu","none"];let $=h.filter(v=>v!==o),E=$[0],S;function B(v){t(10,f=Pe[v.currentTarget.value]),console.log(v.currentTarget.value)}function x(v){t(0,o=v.detail.response),t(2,$=h.filter(j=>j!==o)),S=E,t(1,E=$.includes(S)?S:$[0])}function J(v){S=E,t(1,E=v.currentTarget.value)}let N,y;function P(){E=ze(this),t(1,E),t(2,$)}return a.$$.update=()=>{if(a.$$.dirty&1027){let v=et(f[o]);E==="none"&&(v=v.derive({none:V=>""}));let j=v.groupby([`${ee}`,`${E}`,`${o}`]).rollup({value:V=>tt.sum(V.value)});t(4,y=Math.max(...j.array("value").filter(Boolean)));const A=j.groupby([`${ee}`,`${o}`]).pivot(`${E}`,"value",{sort:!1});t(3,N=A.groupby(`${ee}`).objects({columns:at(`${ee}`),grouped:"object"}))}},[o,E,$,N,y,l,c,B,x,J,f,P]}class ft extends Ge{constructor(r){super(),Je(this,r,ot,nt,Fe,{})}}export{ft as component};
